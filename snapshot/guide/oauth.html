<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>10 OAuth 2.0 1.2.0.BUILD-SNAPSHOT</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <div class="navTitle">
        
        Micronaut Security
    </div>
    <div class="navLinks">
        <ul>
            <li>
                <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                    <a href="../guide/index.html" class="button">Table of contents</a>

                    <div id="nav-summary-childs" style="display:none;">
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/introduction.html"><strong>1</strong><span>Introduction</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/authenticationProviders.html"><strong>2</strong><span>Authentication Providers</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/securityRule.html"><strong>3</strong><span>Security Rules</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/authenticationStrategies.html"><strong>4</strong><span>Authentication Strategies</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/rejection.html"><strong>5</strong><span>Rejection Handling</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/tokenPropagation.html"><strong>6</strong><span>Token Propagation</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/endpoints.html"><strong>7</strong><span>Built-In Security Controllers</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/retrievingAuthenticatedUser.html"><strong>8</strong><span>Retrieve the authenticated user</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/securityEvents.html"><strong>9</strong><span>Security Events</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/oauth.html"><strong>10</strong><span>OAuth 2.0</span></a>
                        </div>
                        
                    </div>
                </div>
            </li>
            <li class="separator selected">
                <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
            </li>
        </ul>
    </div>


</div>

<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../guide/securityEvents.html">&lt;&lt; <strong>9</strong><span>Security Events</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                


                <div class="project">
                    <h1>10 OAuth 2.0</h1>

                    <p><strong>Version:</strong> 1.2.0.BUILD-SNAPSHOT</p>
                </div>

                
                <div id="table-of-content">
                    <h2>Table of Contents</h2>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#installation"><strong>10.1</strong><span>Installation</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#examples"><strong>10.2</strong><span>Examples</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#openid"><strong>10.3</strong><span>Open ID Connect</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#service-discovery"><strong>10.4</strong><span>Service Discovery</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#service-discovery-okta"><strong>10.4.1</strong><span>Service Discovery with OKTA</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#service-discovery-cognito"><strong>10.4.2</strong><span>Service Discovery with AWS Cognito</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#service-discovery-auth0"><strong>10.4.3</strong><span>Service Discovery with Auth0</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#service-discovery-keycloak"><strong>10.4.4</strong><span>Service Discovery with Keycloak</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#oauth-endpoints"><strong>10.5</strong><span>Endpoints</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#authorization"><strong>10.5.1</strong><span>Authorization Endpoint</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:20px"><a href="#state"><strong>10.5.1.1</strong><span>State</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:20px"><a href="#idTokenHint"><strong>10.5.1.2</strong><span>IDToken Hint</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:20px"><a href="#loginHint"><strong>10.5.1.3</strong><span>Login Hint</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:20px"><a href="#nonce"><strong>10.5.1.4</strong><span>Nonce</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#token"><strong>10.5.2</strong><span>Token Endpoint</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#endsession"><strong>10.5.3</strong><span>End Session Endpoint</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:20px"><a href="#logoutController"><strong>10.5.3.1</strong><span>Logout Controller</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:20px"><a href="#logouturl"><strong>10.5.3.2</strong><span>Logout URL</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#providerSpecificBeans"><strong>10.6</strong><span>Provider Specific Beans</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#flows"><strong>10.7</strong><span>Flows</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#authorization-code-grant-type"><strong>10.7.1</strong><span>OpenID Connect Authorization code Flow</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:20px"><a href="#authorization-code-controller"><strong>10.7.1.1</strong><span>Authorization Code Controller</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:20px"><a href="#id-token-validator"><strong>10.7.1.2</strong><span>ID Token Validator</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:20px"><a href="#failure-handler"><strong>10.7.1.3</strong><span>Failure Handler</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:20px"><a href="#successful-handler"><strong>10.7.1.4</strong><span>Successful ID Token Handler</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:20px"><a href="#cookie-successful-handler"><strong>10.7.1.5</strong><span>Cookie Successful ID Token Handler</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:10px"><a href="#password-grant-type"><strong>10.7.2</strong><span>Password Grant Type</span></a>
                    </div>
                    
                </div>
                

                

<h1 id="oauth">10 OAuth 2.0</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-security/edit/master/src/main/docs/guide/oauth.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Micronaut supports authentication with OAuth 2.0 servers, including support for the OpenID standard.</p>
</div>
<div class="paragraph">
<p>The easiest way to get started is by configuring a provider that supports OpenID. Platforms such as <a href="https://developer.okta.com">Okta</a>, <a href="https://auth0.com">Auth0</a>, <a href="https://aws.amazon.com/cognito">AWS Cognito</a>, <a href="https://www.keycloak.org">Keycloak</a>, and <a href="https://developers.google.com/identity/protocols/OpenIDConnect">Google</a> are common examples.</p>
</div>
<div class="paragraph">
<p>Once you create an application client with a provider, you will get a client id and a client secret. The client id and secret combined with the issuer URL is all that is needed to enable authentication with an OpenID provider.</p>
</div>
<div class="paragraph">
<p>For example, to configure Google as a provider:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">micronaut:
  security:
    enabled: true
    oauth2:
      clients:
        google:
          enabled: false
          client-secret: sKWpIl5AHRKh_qTM2xXBrECY
          client-id: 943299861358-3j92fqgsqefgv2g3dpf18frumhq9haul.apps.googleusercontent.com
          openid:
            issuer: https://accounts.google.com</code></pre>
</div>
</div>


<h2 id="installation">10.1 Installation</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-security/edit/master/src/main/docs/guide/oauth/installation.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>        <div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="gradle">compile <span class="hljs-string">'io.micronaut.configuration:micronaut-oauth2:1.2.0.BUILD-SNAPSHOT'</span></code></pre>
</div>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="maven">&lt;dependency&gt;
    &lt;groupId&gt;io.micronaut.configuration&lt;/groupId&gt;
    &lt;artifactId&gt;micronaut-oauth2&lt;/artifactId&gt;
    &lt;version&gt;1.2.0.BUILD-SNAPSHOT&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</p>
</div>
<div class="paragraph">
<p>To use the <code>BUILD-SNAPSHOT</code> version of this library, check the <a href="https://docs.micronaut.io/latest/guide/index.html#usingsnapshots">documentation to use snapshots</a>.</p>
</div>
<div class="paragraph">
<p>Code can be found at the <a href="https://github.com/micronaut-projects/micronaut-security/tree/master/security-oauth2">micronaut-security</a> repository.</p>
</div>


<h2 id="examples">10.2 Examples</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-security/edit/master/src/main/docs/guide/oauth/examples.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>We provide several tutorials for the most common providers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://guides.micronaut.io/micronaut-oauth2-okta/guide/index.html">Authorization Code grant type flow with Micronaut and Okta</a>.</p>
</li>
</ul>
</div>


<h2 id="openid">10.3 Open ID Connect</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-security/edit/master/src/main/docs/guide/oauth/openid.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><a href="https://openid.net/connect/">OpenID Connect 1.0</a> is a simple identity layer on top of the OAuth 2.0 protocol. It allows Clients to verify the identity of the End-User based on the authentication performed by an Authorization Server, as well as to obtain basic profile information about the End-User in an interoperable and REST-like manner.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>If you are new to OpenID Connect, watch <a href="https://www.youtube.com/watch?v=996OiexHze0">OAuth 2.0 and OpenID Connect</a>.</p>
</div>


<h2 id="service-discovery">10.4 Service Discovery</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-security/edit/master/src/main/docs/guide/oauth/service-discovery.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>The easiest way to integrate a Micronaut application with an Open ID Connect server is to use the <code>.well-know/openid-configuration</code> endpoint, an endpoint which applications use to retrieve the configuration information for the OIDC server.</p>
</div>
<div class="paragraph">
<p>Micronaut assumes the URL for the endpoint is the value of property <code>micronaut.security.oauth2.openid.issuer</code> plus the suffix <code>/.well-know/openid-configuration</code>.</p>
</div>
<div class="paragraph">
<p>The endpoint returns a specified set of fields. Micronaut uses the configuration returned to configure itself accordingly.</p>
</div>
<div class="paragraph">
<p>Please, check with your provider the value of the OAuth 2.0 <code>issuer</code>. Next, we show examples for common providers:</p>
</div>


<h2 id="service-discovery-okta">10.4.1 Service Discovery with OKTA</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-security/edit/master/src/main/docs/guide/oauth/service-discovery/service-discovery-okta.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="listingblock">
<div class="title">src/main/resources/application.yml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">micronaut:
  security:
    oauth2:
      client-secret: '${OAUTH_CLIENT_SECRET}'
      client-id: '${OAUTH_CLIENT_ID}'
      issuer: '${OKTA_DOMAIN}/oauth2/${OKTA_AUTHSERVERID}'</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will need to setup the <code>OKTA_DOMAIN</code> and <code>OKTA_AUTHSERVERID</code> environment variables.</p>
</div>
<div class="paragraph">
<p>Those may be something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">export OKTA_DOMAIN=https://dev-XXXXX.oktapreview.com
export OKTA_AUTHSERVERID=default</code></pre>
</div>
</div>
<div class="paragraph">
<p>Check <a href="https://developer.okta.com/docs/api/resources/oidc#well-knownopenid-configuration">OKTA .well-known/openid-configuration documentation</a>.</p>
</div>


<h2 id="service-discovery-cognito">10.4.2 Service Discovery with AWS Cognito</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-security/edit/master/src/main/docs/guide/oauth/service-discovery/service-discovery-cognito.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>To configure the <code>issuer</code> with AWS Cognito you can setup:</p>
</div>
<div class="listingblock">
<div class="title">src/main/resources/application.yml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">micronaut:
  security:
    oauth2:
      client-secret: '${OAUTH_CLIENT_SECRET}'
      client-id: '${OAUTH_CLIENT_ID}'
      issuer: 'https://cognito-idp.${AWS_REGION}.amazonaws.com/${COGNITO_POOL_ID}'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Please, note you will need to define environment varaibles for <code>AWS_REGION</code> and <code>COGNITO_POOL_ID</code>.</p>
</div>


<h2 id="service-discovery-auth0">10.4.3 Service Discovery with Auth0</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-security/edit/master/src/main/docs/guide/oauth/service-discovery/service-discovery-auth0.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="listingblock">
<div class="title">src/main/resources/application.yml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">micronaut:
  security:
    oauth2:
      client-secret: '${OAUTH_CLIENT_SECRET}'
      client-id: '${OAUTH_CLIENT_ID}'
      issuer: '${AUTH0_DOMAINNAME}'</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will need to define the environment variable <code>AUTH0_DOMAINNAME</code>.</p>
</div>
<div class="paragraph">
<p>You can obtain the auth0 domain from the application dashboard:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/auth0-domain.png" alt="auth0 domain">
</div>
</div>
<div class="paragraph">
<p>Check <a href="https://auth0.com/docs/protocols/oidc/openid-connect-discovery">Auth0 OpenID connect discovery documentation</a>.</p>
</div>


<h2 id="service-discovery-keycloak">10.4.4 Service Discovery with Keycloak</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-security/edit/master/src/main/docs/guide/oauth/service-discovery/service-discovery-keycloak.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="listingblock">
<div class="title">src/main/resources/application.yml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">micronaut:
  security:
    oauth2:
      client-secret: '${OAUTH_CLIENT_SECRET}'
      client-id: '${OAUTH_CLIENT_ID}'
      issuer: '${KEYCLOACK_DOMAIN}/auth/realms/${KEYCLOAK_REALM}'</code></pre>
</div>
</div>
<div class="paragraph">
<p>You will need to define the environment variable <code>KEYCLOACK_DOMAIN</code> and <code>KEYCLOAK_REALM</code> for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">export KEYCLOACK_DOMAIN=http://localhost:8080
export KEYCLOAK_REALM=master</code></pre>
</div>
</div>


<h2 id="oauth-endpoints">10.5 Endpoints</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-security/edit/master/src/main/docs/guide/oauth/oauth-endpoints.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>





<h2 id="authorization">10.5.1 Authorization Endpoint</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-security/edit/master/src/main/docs/guide/oauth/oauth-endpoints/authorization.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>If you use the Service discovery endpoint some of the configuration values required to communicate with the Authorization endpoint will be inferred from the service discovery endpoint response. For example, you will not need to configure the authorization endpoint&#8217;s url since that information is typically returned by service discovery endpoint. However, if the default values do not suffice, you can configure the communication with the authorization endpoint:</p>
</div>
<div class="paragraph">
<p>Unresolved directive in &lt;stdin&gt; - include::/home/travis/build/micronaut-projects/micronaut-security/build/generated/configurationProperties/io.micronaut.security.oauth2.openid.endpoints.authorization.AuthorizationEndpointConfigurationProperties.adoc[]</p>
</div>
<div class="paragraph">
<p>The authorization request is built by default with <a href="../api/io/micronaut/security/oauth2/openid/endpoints/authorization/DefaultAuthenticationRequestProvider.html">DefaultAuthenticationRequestProvider</a>. Remember you can always <a href="https://docs.micronaut.io/latest/guide/index.html#replaces">replace that bean</a> and provide your own implementation of <a href="../api/io/micronaut/security/oauth2/openid/endpoints/authorization/AuthenticationRequestProvider.html">AuthenticationRequestProvider</a>.</p>
</div>


<h2 id="state">10.5.1.1 State</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-security/edit/master/src/main/docs/guide/oauth/oauth-endpoints/authorization/state.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>By default, this library will provide a <a href="https://openid.net/specs/openid-connect-core-1_0.html#AuthRequest">state parameter</a> to authentication requests to track the original URL if the request to the URL was denied because the request was unauthorized. That allows the redirection back to the original requested resource after authentication.</p>
</div>
<div class="paragraph">
<p>Because the validation of the state requires the state to be stored somewhere temporarily, state validation is only enabled if a <a href="../api/io/micronaut/security/oauth2/openid/endpoints/authorization/state/validation/persistence/StatePersistence.html">StatePersistence</a> bean is present. An implementation of state persistence that stores the state in an http session has been provided, however it must be enabled through configuration and the necessary dependencies must be on the classpath.</p>
</div>
<div class="paragraph">
<p>To enable state persistence with an http session:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add a dependency to <code>micronaut-session</code></p>
<div class="paragraph">
<p>        <div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="gradle">compile <span class="hljs-string">'io.micronaut:micronaut-session'</span></code></pre>
</div>
</div>
<div class="listingblock multi-language-sample">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="maven">&lt;dependency&gt;
    &lt;groupId&gt;io.micronaut&lt;/groupId&gt;
    &lt;artifactId&gt;micronaut-session&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</p>
</div>
</li>
<li>
<p>Set the state persistence to <code>session</code></p>
<div class="listingblock">
<div class="title">application.yml</div>
<div class="content">
<pre>micronaut.security.oauth2.openid.state.validation.persistence: session</pre>
</div>
</div>
<div class="paragraph">
<p>If state validation fails, an <a href="../api/io/micronaut/security/oauth2/openid/endpoints/authorization/state/InvalidStateException.html">InvalidStateException</a> will be thrown.</p>
</div>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_customizing_the_state">Customizing The State</h3>
<div class="paragraph">
<p>There are several interfaces that implementations can be provided for to override how the state parameter is handled.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interface</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Responsibility</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default Implementation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../api/io/micronaut/security/oauth2/openid/endpoints/authorization/state/StateFactory.html">StateFactory</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Builds a <a href="../api/io/micronaut/security/oauth2/openid/endpoints/authorization/state/State.html">State</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../api/io/micronaut/security/oauth2/openid/endpoints/authorization/state/DefaultStateFactory.html">DefaultStateFactory</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../api/io/micronaut/security/oauth2/openid/endpoints/authorization/state/StateSerDes.html">StateSerDes</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Serializes and de-serializes the state object for use in the authorization request</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../api/io/micronaut/security/oauth2/openid/endpoints/authorization/state/JacksonStateSerDes.html">JacksonStateSerDes</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../api/io/micronaut/security/oauth2/openid/endpoints/authorization/state/validation/StateValidator.html">StateValidator</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validates the state received in the authorization response</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../api/io/micronaut/security/oauth2/openid/endpoints/authorization/state/validation/DefaultStateValidator.html">DefaultStateValidator</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="../api/io/micronaut/security/oauth2/openid/endpoints/authorization/state/validation/persistence/StatePersistence.html">StatePersistence</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Stores the state to be retrieved later to allow validation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">None unless configured</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>To override the behavior of any of those beans, provide an implementation and replace the default one.</p>
</div>
</div>


<h2 id="idTokenHint">10.5.1.2 IDToken Hint</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-security/edit/master/src/main/docs/guide/oauth/oauth-endpoints/authorization/idTokenHint.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>The default implementation does not provide an <a href="https://openid.net/specs/openid-connect-core-1_0.html#IDToken">ID Token hint</a>.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>A Token previously issued by the Authorization Server being passed as a hint about the End-User&#8217;s current or past authenticated session with the Client.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>However, you can provide a <a href="../api/io/micronaut/security/oauth2/openid/endpoints/authorization/IdTokenHintProvider.html">IdTokenHintProvider bean</a> and it will be included in the authentication request.</p>
</div>


<h2 id="loginHint">10.5.1.3 Login Hint</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-security/edit/master/src/main/docs/guide/oauth/oauth-endpoints/authorization/loginHint.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>The default implementation does not provide an <a href="https://openid.net/specs/openid-connect-core-1_0.html#IDToken">login hint</a>.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Hint to the Authorization Server about the login identifier the End-User might use to log in.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>However, you can provide a <a href="../api/io/micronaut/security/oauth2/openid/endpoints/authorization/LoginHintProvider.html">LoginHintProvider bean</a> and it will be included in the authentication request.</p>
</div>


<h2 id="nonce">10.5.1.4 Nonce</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-security/edit/master/src/main/docs/guide/oauth/oauth-endpoints/authorization/nonce.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>The default implementation does not provide an <a href="https://openid.net/specs/openid-connect-core-1_0.html#IDToken">Nonce parameter</a>.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>A String value used to associate a Client session with an ID Token, and to mitigate replay attacks.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>However, you can provide a <a href="../api/io/micronaut/security/oauth2/openid/endpoints/authorization/NonceProvider.html">NonceProvider bean</a> and it will be included in the authentication request.</p>
</div>


<h2 id="token">10.5.2 Token Endpoint</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-security/edit/master/src/main/docs/guide/oauth/oauth-endpoints/token.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>If you use the Service discovery endpoint some of the configuration values required to communicate with the <strong>Token endpoint</strong> will be inferred from the service discovery endpoint response. For example, you will not need to configure the token endpoint&#8217;s url since that information is typically returned by service discovery endpoint. However, if the default values do not suffice, you can configure the communication with the authorization endpoint:</p>
</div>
<div class="paragraph">
<p>Unresolved directive in &lt;stdin&gt; - include::/home/travis/build/micronaut-projects/micronaut-security/build/generated/configurationProperties/io.micronaut.security.oauth2.openid.endpoints.token.TokenEndpointConfigurationProperties.adoc[]</p>
</div>
<div class="paragraph">
<p>The authorization request is built by default with <a href="../api/io/micronaut/security/oauth2/openid/endpoints/token/DefaultTokenRequestProvider.html">DefaultTokenRequestProvider</a>. Remember you can always <a href="https://docs.micronaut.io/latest/guide/index.html#replaces">replace that bean</a> and provide your own implementation of <a href="../api/io/micronaut/security/oauth2/openid/endpoints/token/TokenRequestProvider.html">TokenRequestProvider</a>.</p>
</div>


<h2 id="endsession">10.5.3 End Session Endpoint</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-security/edit/master/src/main/docs/guide/oauth/oauth-endpoints/endsession.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>A logout process may look like the one displayed in the next image:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/logout-diagramm.png" alt="logout diagramm">
</div>
</div>
<div class="paragraph">
<p>Ending the session in the authorization server provider is not standard.</p>
</div>
<div class="paragraph">
<p>Micronaut provides several beans which are loaded by default.</p>
</div>
<div class="paragraph">
<p>The authorization server&#8217;s end session url is provided by an implementation of <a href="../api/io/micronaut/security/oauth2/openid/endpoints/endsession/EndSessionUrlProvider.html">EndSessionUrlProvider</a>. By default, <a href="../api/io/micronaut/security/oauth2/openid/endpoints/endsession/DefaultEndSessionUrlProvider.html">DefaultEndSessionUrlProvider</a> is used.</p>
</div>
<div class="paragraph">
<p>Micronaut attempts to create a valid configuration by default but you can always control the end-session endpoint configuration:</p>
</div>
<div class="paragraph">
<p>However, if the default values do not suffice, you can configure the communication with the authorization endpoint:</p>
</div>
<div class="paragraph">
<p>Unresolved directive in &lt;stdin&gt; - include::/home/travis/build/micronaut-projects/micronaut-security/build/generated/configurationProperties/io.micronaut.security.oauth2.openid.endpoints.endsession.EndSessionEndpointConfigurationProperties.adoc[]</p>
</div>
<div class="paragraph">
<p>Several <a href="#providerSpecificBeans">Provider Specific beans</a> related to end session endpoint configuration are provided.</p>
</div>


<h2 id="logoutController">10.5.3.1 Logout Controller</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-security/edit/master/src/main/docs/guide/oauth/oauth-endpoints/endsession/logoutController.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>You will need to enable the <a href="https://docs.micronaut.io/latest/guide/index.html#logout">Logout Controller</a> and accept GET requests.</p>
</div>
<div class="listingblock">
<div class="title">src/main/resources/application.yml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">micronaut:
    security:
        ...
        ..
        .
        endpoints:
            logout:
                enabled: true <i class="conum" data-value="1"></i><b>(1)</b>
                get-allowed: true <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Enable <a href="https://docs.micronaut.io/latest/guide/index.html#logout">Logout Controller</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Accept HTTP GET requests to the logout controller endpoint.</td>
</tr>
</table>
</div>


<h2 id="logouturl">10.5.3.2 Logout URL</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-security/edit/master/src/main/docs/guide/oauth/oauth-endpoints/endsession/logouturl.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>If you are using <a href="https://docs.micronaut.io/latest/guide/index.html#views">Server side view rendering</a> support in Micronaut, the <a href="../api/io/micronaut/security/oauth2/openid/endpoints/endsession/EndsessionViewModelProcessor.html">EndsessionViewModelProcessor</a> injects into the model the logout url of the authorization server correctly configured.</p>
</div>
<div class="paragraph">
<p>Unresolved directive in &lt;stdin&gt; - include::/home/travis/build/micronaut-projects/micronaut-security/build/generated/configurationProperties/io.micronaut.security.oauth2.openid.endpoints.endsession.EndsessionViewModelProcessorConfigurationProperties.adoc[]</p>
</div>
<div class="paragraph">
<p>Next code snippets shows a Velocity view which contains a link to logout.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-velocity hljs" data-lang="velocity">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Logout/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;a href="${endsessionurl}"&gt;Logout&lt;/a&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>


<h2 id="providerSpecificBeans">10.6 Provider Specific Beans</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-security/edit/master/src/main/docs/guide/oauth/providerSpecificBeans.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="sect2">
<h3 id="_cognito">Cognito</h3>
<div class="paragraph">
<p>If the term <code>cognito</code> is present in the value of <code>micronaut.security.oauth2.openid.issuer</code> the next beans are loaded:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../api/io/micronaut/security/oauth2/openid/providers/AwsCognitoAuthMethodProvider.html">AwsCognitoAuthMethodProvider</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you want to disable that bean you can set <code>micronaut.security.oauth2.token.auth-method-provider.cognito</code> to <code>false</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../api/io/micronaut/security/oauth2/openid/providers/AwsCognitoEndSessionEndpointConfiguration.html">AwsCognitoEndSessionEndpointConfiguration</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you want to disable that bean you can set <code>micronaut.security.oauth2..end-session.aws-cognito.enabled</code> to <code>false</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_okta">Okta</h3>
<div class="paragraph">
<p>If the term <code>okta</code> is present in the value of <code>micronaut.security.oauth2.openid.issuer</code> the next beans are loaded:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../api/io/micronaut/security/oauth2/openid/providers/OktaEndSessionEndpointConfiguration.html">OktaEndSessionEndpointConfiguration</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you want to disable that bean you can set <code>micronaut.security.oauth2.end-session.okta.enabled</code> to <code>false</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_auth0">Auth0</h3>
<div class="paragraph">
<p>If the term <code>auth0</code> is present in the value of <code>micronaut.security.oauth2.openid.issuer</code> the next beans are loaded:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../api/io/micronaut/security/oauth2/openid/providers/Auth0EndSessionEndpointConfiguration.html">Auth0EndSessionEndpointConfiguration</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you want to disable that bean you can set <code>micronaut.security.oauth2.end-session.auth0.enabled</code> to <code>false</code></p>
</div>
</div>


<h2 id="flows">10.7 Flows</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-security/edit/master/src/main/docs/guide/oauth/flows.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>





<h2 id="authorization-code-grant-type">10.7.1 OpenID Connect Authorization code Flow</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-security/edit/master/src/main/docs/guide/oauth/flows/authorization-code-grant-type.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>The following configuration illustrates a possible set up to use authorization code flow with Micronaut and a third-party OpenID Configuration authorization server.</p>
</div>
<div class="listingblock">
<div class="title">src/main/resources/application.yml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">micronaut:
    security:
        enabled: true <i class="conum" data-value="1"></i><b>(1)</b>
        oauth2:
          client-secret: '${OAUTH_CLIENT_SECRET}'  <i class="conum" data-value="2"></i><b>(2)</b>
          client-id: '${OAUTH_CLIENT_ID}' <i class="conum" data-value="3"></i><b>(3)</b>
          issuer: '${OKTA_DOMAIN}/oauth2/${OKTA_AUTHSERVERID}' <i class="conum" data-value="4"></i><b>(4)</b>
        token:
            jwt:
                enabled: true <i class="conum" data-value="5"></i><b>(5)</b>
                cookie:
                    enabled: true <i class="conum" data-value="6"></i><b>(6)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Enable security</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Client Secret. Your authorization server provider provides this value.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Client ID. Your authorization server provider provides this value.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>issuer</code> url. Allows micronaut to discover the configuration of the Open ID Configuration server.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Often, ID Token will be responded as JWT tokens. You will need to enable <a href="https://docs.micronaut.io/latest/guide/index.html#jwt">Micronaut&#8217;s JWT support</a> to validate it.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Once, validated you may want to save the JWT IDToken in a cookie. To read in subsequent requests, enable <a href="https://docs.micronaut.io/latest/guide/index.html#cookieToken">Cookie Token Reader</a>.</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/diagramm.png" alt="diagramm">
</div>
</div>


<h2 id="authorization-code-controller">10.7.1.1 Authorization Code Controller</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-security/edit/master/src/main/docs/guide/oauth/flows/authorization-code-grant-type/authorization-code-controller.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>The <a href="../api/io/micronaut/security/oauth2/endpoints/AuthorizationCodeController.html">AuthorizationCodeController controller</a> handles the response from the Authorization endpoint and it can be configured:</p>
</div>
<div class="paragraph">
<p>Unresolved directive in &lt;stdin&gt; - include::/home/travis/build/micronaut-projects/micronaut-security/build/generated/configurationProperties/io.micronaut.security.oauth2.endpoints.AuthorizationCodeControllerConfigurationProperties.adoc[]</p>
</div>


<h2 id="id-token-validator">10.7.1.2 ID Token Validator</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-security/edit/master/src/main/docs/guide/oauth/flows/authorization-code-grant-type/id-token-validator.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Assuming the ID Token is a JWT token, the <a href="../api/io/micronaut/security/oauth2/openid/idtoken/DefaultIdTokenAccessTokenResponseValidator.html">DefaultIdTokenAccessTokenResponseValidator</a> validates the JWT Claims against every bean of type <a href="../api/io/micronaut/security/token/jwt/validator/GenericJwtClaimsValidator.html">GenericJwtClaimsValidator</a> and <a href="../api/io/micronaut/security/oauth2/openid/idtoken/validation/IdTokenClaimsValidator.html">IdTokenClaimsValidator</a>.</p>
</div>
<div class="paragraph">
<p>Some <a href="../api/io/micronaut/:io/micronaut/security/token/jwt/validator/GenericJwtClaimsValidator.html">GenericJwtClaimsValidator</a> are already registered:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../api/io/micronaut/security/token/jwt/validator/ExpirationJwtClaimsValidator.html">ExpirationJwtClaimsValidator</a></p>
</li>
<li>
<p><a href="../api/io/micronaut/security/token/jwt/validator/SubjectNotNullJwtClaimsValidator.html">SubjectNotNullJwtClaimsValidator</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Some <a href="../api/io/micronaut/security/oauth2/openid/idtoken/validation/IdTokenClaimsValidator.html">IdTokenClaimsValidator</a> are already registered:
and:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="../api/io/micronaut/security/oauth2/openid/idtoken/validation/AudienceJwtClaimsValidator.html">AudienceJwtClaimsValidator</a></p>
</li>
<li>
<p><a href="../api/io/micronaut/security/oauth2/openid/idtoken/validation/IssuerJwtClaimsValidator.html">IssuerJwtClaimsValidator</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Please, validate your IDToken as described in the <a href="https://openid.net/specs/openid-connect-core-1_0.html#IDTokenValidation">ID Token Validation</a> section.</p>
</div>
<div class="paragraph">
<p>Remember to enable JWT support <code>micronaut.security.token.jwt.enabled=true</code>.</p>
</div>


<h2 id="failure-handler">10.7.1.3 Failure Handler</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-security/edit/master/src/main/docs/guide/oauth/flows/authorization-code-grant-type/failure-handler.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>If the validation of the <a href="../api/io/micronaut/security/oauth2/openid/idtoken/IdTokenAccessTokenResponse.html">IdTokenAccessTokenResponse</a>, an object which encapsulates the response of the token endpoint, fails a <a href="../api/io/micronaut/security/oauth2/handlers/InvalidIdTokenAccessTokenResponseException.html">InvalidIdTokenAccessTokenResponseException</a> is raised.</p>
</div>
<div class="paragraph">
<p>Read <a href="https://docs.micronaut.io/latest/guide/index.html#errorHandling">Error Handling</a> section in the documentation to handle the exception according to your needs.</p>
</div>


<h2 id="successful-handler">10.7.1.4 Successful ID Token Handler</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-security/edit/master/src/main/docs/guide/oauth/flows/authorization-code-grant-type/successful-handler.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Once the authentication has been validated, it is to time handle the ID Token. Provide a bean of type:
<a href="../api/io/micronaut/security/oauth2/handlers/SuccessfulIdTokenAccessTokenResponseHandler.html">SuccessfulIdTokenAccessTokenResponseHandler</a></p>
</div>


<h2 id="cookie-successful-handler">10.7.1.5 Cookie Successful ID Token Handler</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-security/edit/master/src/main/docs/guide/oauth/flows/authorization-code-grant-type/cookie-successful-handler.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>By default, <a href="../api/io/micronaut/security/oauth2/handlers/CookieSuccessfulIdTokenAccessTokenResponseHandler.html">CookieSuccessfulIdTokenAccessTokenResponseHandler</a> is provided which can be configured with:</p>
</div>
<div class="paragraph">
<p>Unresolved directive in &lt;stdin&gt; - include::/home/travis/build/micronaut-projects/micronaut-security/build/generated/configurationProperties/io.micronaut.security.oauth2.handlers.CookieSuccessfulIdTokenAccessTokenResponseHandlerConfigurationProperties.adoc[]</p>
</div>


<h2 id="password-grant-type">10.7.2 Password Grant Type</h2>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/micronaut-projects/micronaut-security/edit/master/src/main/docs/guide/oauth/password-grant-type.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The Password grant is one of the simplest OAuth grants and involves only one step: the application presents a traditional username and password login form to collect the user&#8217;s credentials and makes a POST request to the server to exchange the password for an access token</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>For example, the next image illustrates a Basic auth authentication which does a remote grant type pasword authentication:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/grant-type-password.png" alt="grant type password">
</div>
</div>
<div class="paragraph">
<p>You can enable an implementation of <a href="https://docs.micronaut.io/latest/guide/index.html#authenticationProviders">Authentication Provider</a> to authenticate using Grant type password.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">micronaut:
  security:
    oauth2:
      client-secret: '${OAUTH_CLIENT_SECRET}'
      client-id: '${OAUTH_CLIENT_ID}'
      grant-type-password:
        enabled: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Unresolved directive in &lt;stdin&gt; - include::/home/travis/build/micronaut-projects/micronaut-security/build/generated/configurationProperties/io.micronaut.security.oauth2.grants.password.GrantTypePasswordRequestProviderConfigurationProperties.adoc[]</p>
</div>


                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../guide/securityEvents.html">&lt;&lt; <strong>9</strong><span>Security Events</span></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
